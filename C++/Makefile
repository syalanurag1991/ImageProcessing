CC = ${CROSS_COMPILE}gcc
CXX = ${CROSS_COMPILE}g++

BILINEARINTERPOLATION_APP = ./bin/BilinearInterpolation
FILMEFFECT_APP = ./bin/FilmEffect
HISTOGRAMEQ_APP   = ./bin/HistogramEQ
NOISEREMOVAL_APP   = ./bin/NoiseRemoval
OILPAINTINGEFFECT_APP = ./bin/OilPaintingEffect
RGBTOCMY_APP = ./bin/RGBtoCMY
RGBTOGRAYSCALE_APP = ./bin/RGBtoGrayscale
MORPHOLOGICALFILTERING_APP = ./bin/MorphologicalFiltering
OBJECTSINIMAGE_APP = ./bin/ObjectsInImage
COUNTINGGAME_APP = ./bin/CountingGame
CIRCULARWARPING_APP = ./bin/CircularWarping
DITHERING_APP = ./bin/Dithering
ERRORDIFFUSION_APP = ./bin/ErrorDiffusion
IMAGEROTATION_APP = ./bin/ImageRotation
IMAGESTITCHING_APP = ./bin/ImageStitching
TEXTURECLASSIFICATION_APP = ./bin/TextureClassification
TEXTURESEGMENTATION_APP = ./bin/TextureSegmentation
BASICEDGEDETECTION_APP = ./bin/BasicEdgeDetection

CFLAGS= -g -std=c++11

COMMON_OBJS = FileIO.o \
			  ChannelManipulation.o \
			  ImageManipulation.o \
			  ImageAnalysis.o \
			  FilterApplication.o \
			  MorphologicalFilterTable.o \
			  BinaryImageOperations.o \
			  FeatureReduction.o
				
BILINEARINTERPOLATION_OBJS = BilinearInterpolation.o
FILMEFFECT_OBJS = FilmEffect.o
HISTOGRAMEQ_OBJS = HistogramEQ.o
NOISEREMOVAL_OBJS = NoiseRemoval.o
OILPAINTINGEFFECT_OBJS = OilPaintingEffect.o
RGBTOCMY_OBJS = RGBtoCMY.o
RGBTOGRAYSCALE_OBJS = RGBtoGrayscale.o
MORPHOLOGICALFILTERING_OBJS = MorphologicalFiltering.o
OBJECTSINIMAGE_OBJS = ObjectsInImage.o
COUNTINGGAME_OBJS = CountingGame.o
CIRCULARWARPING_OBJS = CircularWarping.o
DITHERING_OBJS = Dithering.o
ERRORDIFFUSION_OBJS = ErrorDiffusion.o
IMAGEROTATION_OBJS = ImageRotation.o
IMAGESTITCHING_OBJS = ImageStitching.o
TEXTURECLASSIFICATION_OBJS = TextureClassification.o
TEXTURESEGMENTATION_OBJS = TextureSegmentation.o
BASICEDGEDETECTION_OBJS = BasicEdgeDetection.o

INCLUDE = -I ./inc

LIB = 

LDFLAGS = -lm

vpath %.c ./src ./test
vpath %.cpp ./src ./test

all: ${BILINEARINTERPOLATION_APP} ${HISTOGRAMEQ_APP} ${FILMEFFECT_APP} ${OILPAINTINGEFFECT_APP} \
	 ${NOISEREMOVAL_APP} ${RGBTOCMY_APP} ${RGBTOGRAYSCALE_APP} \
	 ${MORPHOLOGICALFILTERING_APP} ${OBJECTSINIMAGE_APP} ${COUNTINGGAME_APP} ${CIRCULARWARPING_APP} \
	 ${DITHERING_APP} ${ERRORDIFFUSION_APP} ${IMAGEROTATION_APP} ${IMAGESTITCHING_APP} \
	 ${TEXTURECLASSIFICATION_APP} ${TEXTURESEGMENTATION_APP} ${BASICEDGEDETECTION_APP}

noise_removal: ${NOISEREMOVAL_APP}
histogram_eq: ${HISTOGRAMEQ_APP}
bilinear_interpolation: ${BILINEARINTERPOLATION_APP}
film_effect: ${FILMEFFECT_APP}
oil_painting_effect: ${OILPAINTINGEFFECT_APP}
rgb_to_cmy: ${RGBTOCMY_APP}
rgb_to_grayscale: ${RGBTOGRAYSCALE_APP}
morphological_filtering: ${MORPHOLOGICALFILTERING_APP}
objects_in_image: ${OBJECTSINIMAGE_APP}
counting_game: ${COUNTINGGAME_APP}
circular_warping: ${CIRCULARWARPING_APP}
dithering: ${DITHERING_APP}
error_diffusion: ${ERRORDIFFUSION_APP}
image_rotation:	${IMAGEROTATION_APP}
image_stitching: ${IMAGESTITCHING_APP}
texture_classification: ${TEXTURECLASSIFICATION_APP}
texture_segmentation: ${TEXTURESEGMENTATION_APP}
basic_edge_detection: ${BASICEDGEDETECTION_APP}

.c.o:
	@${CC} ${CFLAGS} ${INCLUDE} -c $< ${LIB} ${LDFLAGS} 
	@echo [CC] $@

.cpp.o:
	@${CXX} ${CFLAGS} ${INCLUDE} -c $< ${LIB} ${LDFLAGS} 
	@echo [CXX] $@
	
${BILINEARINTERPOLATION_APP}:${COMMON_OBJS} ${BILINEARINTERPOLATION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${BILINEARINTERPOLATION_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${FILMEFFECT_APP}:${COMMON_OBJS} ${FILMEFFECT_OBJS} 
	@${CXX} ${COMMON_OBJS} ${FILMEFFECT_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${HISTOGRAMEQ_APP}:${COMMON_OBJS} ${HISTOGRAMEQ_OBJS} 
	@${CXX} ${COMMON_OBJS} ${HISTOGRAMEQ_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${NOISEREMOVAL_APP}:${COMMON_OBJS} ${NOISEREMOVAL_OBJS} 
	@${CXX} ${COMMON_OBJS} ${NOISEREMOVAL_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${OILPAINTINGEFFECT_APP}:${COMMON_OBJS} ${OILPAINTINGEFFECT_OBJS} 
	@${CXX} ${COMMON_OBJS} ${OILPAINTINGEFFECT_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${RGBTOCMY_APP}:${COMMON_OBJS} ${RGBTOCMY_OBJS} 
	@${CXX} ${COMMON_OBJS} ${RGBTOCMY_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${RGBTOGRAYSCALE_APP}:${COMMON_OBJS} ${RGBTOGRAYSCALE_OBJS} 
	@${CXX} ${COMMON_OBJS} ${RGBTOGRAYSCALE_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${MORPHOLOGICALFILTERING_APP}:${COMMON_OBJS} ${MORPHOLOGICALFILTERING_OBJS} 
	@${CXX} ${COMMON_OBJS} ${MORPHOLOGICALFILTERING_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${OBJECTSINIMAGE_APP}: ${COMMON_OBJS} ${OBJECTSINIMAGE_OBJS} 
	@${CXX} ${COMMON_OBJS} ${OBJECTSINIMAGE_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@
	
${COUNTINGGAME_APP}:  ${COMMON_OBJS} ${COUNTINGGAME_OBJS} 
	@${CXX} ${COMMON_OBJS} ${COUNTINGGAME_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${CIRCULARWARPING_APP}:  ${COMMON_OBJS} ${CIRCULARWARPING_OBJS} 
	@${CXX} ${COMMON_OBJS} ${CIRCULARWARPING_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${DITHERING_APP}:  ${COMMON_OBJS} ${DITHERING_OBJS} 
	@${CXX} ${COMMON_OBJS} ${DITHERING_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${ERRORDIFFUSION_APP}:  ${COMMON_OBJS} ${ERRORDIFFUSION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${ERRORDIFFUSION_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${IMAGEROTATION_APP}:  ${COMMON_OBJS} ${IMAGEROTATION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${IMAGEROTATION_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${IMAGESTITCHING_APP}:  ${COMMON_OBJS} ${IMAGESTITCHING_OBJS} 
	@${CXX} ${COMMON_OBJS} ${IMAGESTITCHING_OBJS} ${CFLAGS} ${INCLUDE} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${TEXTURECLASSIFICATION_APP}:${COMMON_OBJS} ${TEXTURECLASSIFICATION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${TEXTURECLASSIFICATION_OBJS} ${CFLAGS} ${INCLUDE} ${PKG_CONFIG} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${TEXTURESEGMENTATION_APP}:${COMMON_OBJS} ${TEXTURESEGMENTATION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${TEXTURESEGMENTATION_OBJS} ${CFLAGS} ${INCLUDE} ${PKG_CONFIG} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

${BASICEDGEDETECTION_APP}:${COMMON_OBJS} ${BASICEDGEDETECTION_OBJS} 
	@${CXX} ${COMMON_OBJS} ${BASICEDGEDETECTION_OBJS} ${CFLAGS} ${INCLUDE} ${PKG_CONFIG} -o $@ $(LIB) ${LDFLAGS}
	@echo [CXX] $@

clean:
	find . -type f | xargs touch
	@rm -rf *.o
	@rm -rf ${BILINEARINTERPOLATION_APP} ${FILMEFFECT_APP} ${HISTOGRAMEQ_APP} ${NOISEREMOVAL_APP} \
			${OILPAINTINGEFFECT_APP} ${RGBTOCMY_APP} ${RGBTOGRAYSCALE_APP}
			${MORPHOLOGICALFILTERING_APP} {OBJECTSINIMAGE_APP} ${COUNTINGGAME_APP} ${CIRCULARWARPING_APP} \
			${DITHERING_APP} ${ERRORDIFFUSION_APP} ${IMAGEROTATION_APP} ${IMAGESTITCHING_APP} \
			${TEXTURECLASSIFICATION_APP} ${TEXTURESEGMENTATION_APP} ${BASICEDGEDETECTION_APP}
	@echo [RM] ${BILINEARINTERPOLATION_APP}
	@echo [RM] ${FILMEFFECT_APP}
	@echo [RM] ${HISTOGRAMEQ_APP} 
	@echo [RM] ${NOISEREMOVAL_APP}
	@echo [RM] ${OILPAINTINGEFFECT_APP}
	@echo [RM] ${RGBTOCMY_APP}
	@echo [RM] ${RGBTOGRAYSCALE_APP}
	@echo [RM] ${MORPHOLOGICALFILTERING_APP}
	@echo [RM] ${OBJECTSINIMAGE_APP}
	@echo [RM] ${COUNTINGGAME_APP}
	@echo [RM] ${CIRCULARWARPING_APP}
	@echo [RM] ${DITHERING_APP}
	@echo [RM] ${ERRORDIFFUSION_APP}
	@echo [RM] ${IMAGEROTATION_APP}
	@echo [RM] ${IMAGESTITCHING_APP}
	@echo [RM] ${TEXTURECLASSIFICATION_APP}
	@echo [RM] ${TEXTURESEGMENTATION_APP}
	@echo [RM] ${BASICEDGEDETECTION_APP}